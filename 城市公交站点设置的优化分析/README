# 城市公交站点设置的优化分析
现能提供的数据：
    1。出租车GPS监控数据；
        流水号|车牌号|数据时间|经度|纬度|速度|空重车状态|是否空载
    2。地面公交车GPS监控数据；
        经度|纬度|海拔|业务时间|记录时间|到离站（1-到站、2-离站）|GPS速度|车牌号
    3。地面公交车刷卡数据；
        卡片记录编号|交易金额（打折前）|实际交易金额|交易时间|公司名称|线路名称|车牌号
    4。地铁站刷卡交易数据
        卡片记录编号|交易金额（打折前）|实际交易金额|交易时间|公司名称|线路名称|车牌号|进出站

挖掘目标：
    1、利用公交车载GPS数据与公交刷卡数据，构建模型，分析居民出行规律
    2、结合目标1到因素分析，最终提出城市公交站点设置到优化建议

分析方法与过程：
    确定挖掘目标===》数据抽取===》数据探索与预处理===》挖掘建模===》模型应用===》效果评估

使用数据：
    地面公交车GPS监控数据
    地面公交车刷卡数据

数据属性规约：
    公交卡数据集： 公交卡卡号|交易时间|线路名称|车牌号
    公交GPS数据集：经度|纬度|业务时间|车牌号

数据预处理：
    数据清洗：从业务以及建模到相关需要方面考虑，筛选出需要到数据
    缺失值处理：在原始数据集中（特别是：经度、纬度）存在数据缺失
    处理方法：
            1、丢弃经度为空的记录；
            2、丢弃纬度为空的记录；
            3、丢弃到站为空的记录。

具体操作：
    1、提取68路公交车GPS数据并清洗
    2、分析68路公交车GPS数据及交易数据
    3、聚类（采用：DBSCAN聚类——密度聚类）
    4、得到站点数据（包含到达站点的时间）
    5、利用乘客上车刷卡时的时间及卡编号得到———【上车人数|下车人数】
    6、利用上下车人数构建OD矩阵

难点：
    该数据没有公交站点信息，需要利用聚类算法进行聚类，分析出站点数量及位置
    下车人数的获取（深圳公交只是上车刷一次卡，下车不刷卡），需要利用概率论

方法确定：
    1、基于密度的DBScan算法
        主要依赖两个主要参数进行聚类：
            （1）Eps  对象点的区域半径
            （2）MinPts   区域内点的个数的阈值
        DBScan算法通过查找数据集中任意一个点的距离在Eps区域类进行聚类，
      如果在这个区域内的点数大于MinPts，则将这些点放在同一个蔟中，形成
      一类。
    2、计算下车人数：
        假设1：居民公交出行的出行站数服从泊松分布
        假设2：居民出行距离服从正态分布，中间距离选择乘公交
        引入公交站点吸引权重：该站点上车人数/全线路上车总人数
        居民公交出行的站数概率Pij：
             i站上车j站下车的概率Fij * j站吸引权重
         ——————————————————————————————————————————
          i站到终点站之间所有下车概率累加 * j站吸引权重
    3、建立OD矩阵（O：出发点 | D：目的点）
